tosca_definitions_version: cloudify_dsl_1_3

imports:
  - https://cloudify.co/spec/cloudify/6.2.0/types.yaml
  - plugin:cloudify-utilities-plugin?version= >=1.25.3

inputs:

  host:
    description: >
      IP/Hostname of dci-controller-api.
    type: string
    default: "localhost"

  port:
    description: >
      Port of dci-controller-api.
    type: integer
    default: 6699

  east_site_uuid:
    description: >
      UUID of east site.
    type: string

  west_site_uuid:
    description: >
      UUID of west site.
    type: string


dsl_definitions:

  endpoint_properties: &endpoint_properties
    host: { get_input: host }
    port: { get_input: port }
    ssl: false
    verify: false

node_templates:

  east_site:
    type: cloudify.rest.Requests
    properties:
      <<: *endpoint_properties
    interfaces:
      cloudify.interfaces.lifecycle:
        start:
          inputs:
            template_file: templates/sites-get-one.yaml
            prerender: true
            params:
              SITE_UUID: { get_input: east_site_uuid }

  west_site:
    type: cloudify.rest.Requests
    properties:
      <<: *endpoint_properties
    interfaces:
      cloudify.interfaces.lifecycle:
        start:
          inputs:
            template_file: templates/sites-get-one.yaml
            prerender: true
            params:
              SITE_UUID: { get_input: west_site_uuid }
